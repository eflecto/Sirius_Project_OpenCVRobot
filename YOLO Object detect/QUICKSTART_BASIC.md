# ๐ ะะซะกะขะะซะ ะกะขะะะข - ะะฐะทะพะฒัะน ัะบัะธะฟั

## โก ะะฐ 3 ะผะธะฝััั ะดะพ ัะตะทัะปััะฐัะฐ

### 1. ะะพะดะณะพัะพะฒะบะฐ (1 ะผะธะฝ)

```bash
# ะฃััะฐะฝะพะฒะธัะต ะทะฐะฒะธัะธะผะพััะธ
pip install opencv-python ultralytics numpy

# ะะพะปะพะถะธัะต ะฒ ะพะดะฝั ะฟะฐะฟะบั:
# - yolo_distance_basic.py
# - camera_calib_result.npz (ะฒะฐั ัะฐะนะป ะบะฐะปะธะฑัะพะฒะบะธ)
```

### 2. ะะฐะฟััะบ (1 ะบะพะผะฐะฝะดะฐ)

```bash
python yolo_distance_basic.py
```

### 3. ะะตะทัะปััะฐั! ๐

ะั ัะฒะธะดะธัะต:
- ะะธะดะตะพ ั ะบะฐะผะตัั
- ะะฐะผะบะธ ะฒะพะบััะณ ะปัะดะตะน (ัะฒะตัะฝัะต ะฟะพ ัะฐัััะพัะฝะธั)
- ะะฐัััะพัะฝะธะต ะดะพ ะบะฐะถะดะพะณะพ ัะตะปะพะฒะตะบะฐ
- ะฃะณะพะป ะพัะฝะพัะธัะตะปัะฝะพ ัะตะฝััะฐ ะบะฐะผะตัั
- FPS ะธ ะบะพะปะธัะตััะฒะพ ะปัะดะตะน

---

## ๐ฎ ะฃะฟัะฐะฒะปะตะฝะธะต

```
ESC - ะฒััะพะด
S   - ัะพััะฐะฝะธัั ะบะฐะดั
P   - ะฟะฐัะทะฐ
```

---

## ๐ ะงัะพ ะฟะพะบะฐะทัะฒะฐะตั

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  Person #1 (0.95)                       โ
โ  Dist: 4.52m      โ ะะฐัััะพัะฝะธะต         โ
โ  Angle: +15.3deg  โ ะฃะณะพะป (+ ัะฟัะฐะฒะฐ)    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

ะฆะฒะตัะฐ:
๐ด ะัะฐัะฝัะน   - < 1.5ะผ (ะะงะะะฌ ะะะะะะ!)
๐ ะัะฐะฝะถะตะฒัะน - 1.5-3ะผ (ะะปะธะทะบะพ)
๐ก ะะตะปััะน    - 3-5ะผ (ะกัะตะดะฝะต)
๐ข ะะตะปะตะฝัะน   - > 5ะผ (ะะฐะปะตะบะพ)
```

---

## ๐งช ะขะตัั ะฝะฐ ะธะทะพะฑัะฐะถะตะฝะธะธ

```bash
python test_on_image.py photo.jpg
```

ะะพะบะฐะถะตั ะดะตัะฐะปัะฝัั ะธะฝัะพัะผะฐัะธั:
- ะะฐัััะพัะฝะธะต ะฟะพ ัะธัะธะฝะต
- ะะฐัััะพัะฝะธะต ะฟะพ ะฒััะพัะต
- ะกัะตะดะฝะตะต ัะฐัััะพัะฝะธะต
- ะฃะณะพะป ะธ ัะผะตัะตะฝะธะต
- ะะฐะดัะถะฝะพััั ะธะทะผะตัะตะฝะธั

---

## ๐ค ะัะฟะพะปัะทะพะฒะฐะฝะธะต ั ัะพะฑะพัะพะผ

```python
from yolo_distance_basic import PersonDistanceDetector

# ะะฝะธัะธะฐะปะธะทะฐัะธั
detector = PersonDistanceDetector(
    calibration_file='camera_calib_result.npz'
)

# ะ ัะธะบะปะต ัะพะฑะพัะฐ
frame = robot.get_camera_frame()
detections = detector.detect_people(frame)

if detections:
    closest = detections[0]
    
    # ะะพะปััะฐะตะผ ะดะฐะฝะฝัะต
    distance = closest['distance_z']    # ะผะตััั
    angle = closest['angle_deg']        # ะณัะฐะดััั
    
    # ะะพะผะฐะฝะดั ัะพะฑะพัั
    robot.turn(angle)           # ะะพะฒะตัะฝะธัั
    robot.forward(distance)     # ะัะพะตะดั
    # ะัะธะตัะฐะป ะบ ัะตะปะพะฒะตะบั! โ
```

---

## ๐ ะะฐะบ ัะฐะฑะพัะฐัั ัะพัะผัะปั

### ะะฐัััะพัะฝะธะต:

```python
# ะะพ ัะธัะธะฝะต ะฟะปะตั (45 ัะผ)
dist_w = (45 ร fx) / bbox_width

# ะะพ ะฒััะพัะต ัะตะปะพะฒะตะบะฐ (170 ัะผ)
dist_h = (170 ร fy) / bbox_height

# ะกัะตะดะฝะตะต ะฐัะธัะผะตัะธัะตัะบะพะต (ัะฒะพั ะธะดะตั!)
distance = (dist_w + dist_h) / 2
```

### ะฃะณะพะป:

```python
# ะกะผะตัะตะฝะธะต ะพั ัะตะฝััะฐ
offset = bbox_center_x - cx

# ะฃะณะพะป
angle = arctan(offset / fx) ร 180/ฯ
```

---

## ๐ฏ ะะธะทัะฐะปะธะทะฐัะธั

```
         ๐ท ะะฐะผะตัะฐ/ะะพะฑะพั
         |
         | distance_z = 5.0ะผ
         |
         +โโโโโโโโโ  angle = +15ยฐ
         |\
         | \
         |  \ distance_real = 5.2ะผ
         |   \
         |    ๐ค ะงะตะปะพะฒะตะบ
         
ะงัะพ ะฒััะธัะปัะตั:
โ distance_z - ัะฐัััะพัะฝะธะต ะฒะดะพะปั ะพัะธ (5.0ะผ)
โ angle - ัะณะพะป ะฟะพะฒะพัะพัะฐ (+15ยฐ)
โ distance_real - ัะตะฐะปัะฝะพะต ัะฐัััะพัะฝะธะต (5.2ะผ)

ะะปั ัะพะฑะพัะฐ:
1. ะะพะฒะตัะฝะธ ะฝะฐ +15ยฐ
2. ะัะพะตะดั 5.0ะผ
3. ะัะธะตัะฐะป! โ
```

---

## โ๏ธ ะะฐัััะพะนะบะธ

### ะััะณะฐั ะผะพะดะตะปั YOLO:

```python
detector = PersonDistanceDetector(
    model_path='yolov8s.pt'  # ัะพัะฝะตะต, ะฝะพ ะผะตะดะปะตะฝะฝะตะต
)
```

### ะะปั ะดะตัะตะน:

```python
# ะ __init__ ะบะปะฐััะฐ PersonDistanceDetector
self.PERSON_HEIGHT = 130  # ัะผ
self.PERSON_WIDTH = 35    # ัะผ
```

---

## โ FAQ

**Q: ะะฐัััะพัะฝะธะต ะฝะตัะพัะฝะพะต?**  
A: ะัะพะฒะตัััะต - ัะตะปะพะฒะตะบ ััะพะฝัะฐะปัะฝะพ? ะะพัั ~170ัะผ? ะะพะฑะฐะฒะธะผ ะบะพััะตะบัะธั ะดะธััะพััะธะธ ะฟะพะทะถะต.

**Q: ะะฐะผะตัะฐ ะฝะต ะพัะบััะฒะฐะตััั?**  
A: ะะพะฟัะพะฑัะนัะต `camera_id=1` ะฒะผะตััะพ `0`

**Q: FPS ะฝะธะทะบะธะน?**  
A: ะัะฟะพะปัะทัะนัะต `yolov8n.pt` (ัะฐะผะฐั ะฑััััะฐั ะผะพะดะตะปั)

---

## ๐ ะงัะพ ะดะฐะปััะต?

1. โ ะัะพัะตััะธััะนัะต ะฝะฐ ัะฐะทะฝัั ัะฐัััะพัะฝะธัั
2. โ ะัะพะฒะตัััะต ัะพัะฝะพััั ะธะทะผะตัะตะฝะธะน
3. โญ๏ธ ะกะปะตะดัััะธะน ัะฐะณ: ะดะพะฑะฐะฒะธะผ ะบะพััะตะบัะธั ะดะธััะพััะธะธ
4. โญ๏ธ ะะพัะพะผ: ััะตะบะธะฝะณ ะธ ัะณะปะฐะถะธะฒะฐะฝะธะต

---

**ะะพัะพะฒะพ! ะะฐะฟััะบะฐะนัะต ะธ ัะตััะธััะนัะต!** ๐

ะะพะดัะพะฑะฝะตะต: [README_BASIC.md](README_BASIC.md)
